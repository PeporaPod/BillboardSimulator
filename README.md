# LEDマトリクスシミュレータ
[DXライブラリ](http://dxlib.o.oo7.jp/ "ＤＸライブラリ置き場　ＨＯＭＥ")を使用してLEDマトリクスを再現し、文字や記号を表示することを目的とする。
また、LEDマトリクスで文字や記号を表示する場合、表示したい文字や記号に対応して点灯させるLEDのマッピングが必要になる。
が、そのためのフォントやマッピングはこのプログラムにおいては実装しない。
そこで、表示内容のマッピングは、現行の電光掲示に実際に表示されているものを参考にして行う。
電光掲示の例として、本プログラムにおいては、鉄道の発車標を再現するような形でLEDマトリクスを仮想的に表現していく。
実際の電光掲示については自身で駅などで撮影したもの、インターネット上にアップロードされ閲覧できるもの、発車標の既存の[発車標シミュレータを作成しているサイト](http://www.geocities.jp/yoshi223_k/page/hasshahyo/index.htm "発車標シミュレーター - 鉄道駅の発車案内板(LED電光掲示板/ディスプレイ)を忠実に再現")や[発車標を資料としてまとめているサイト](http://led.e501.net/index.php?FrontPage "FrontPage - LED発車標 Wiki")などを参考にさせていただくことにした。

_リンクの最終参照日: 2018/01/20_

---
# プログラム構成の概要
このプログラムは見かけ上、鉄道の発車標のシミュレーションをするものである。
表示される文字/数字/記号などはプログラム上ではLEDの点灯マップとして表現する必要がある。
点灯マップに関するデータはテキストファイルとして編集するのが大変面倒であり、各表示について全てテキストやCSVといった形式で表現すると、データ容量や読み書きの速度についてかなりのデメリットを負う。
そこで、点灯マップのデータを独自に定義し、このプログラム内にエディタやビュアーとしての機能を実装することとした。
よって、本プログラムの主な構成要素としては、
- 発車標のシミュレーション
- LEDマトリクスに表示する内容の閲覧
- LEDマトリクスに表示する内容の作成/編集

が挙げられる。
これらの詳細について記述していく。

## グローバル定数
- LED半径: 2[pixel]

## 構造体
- LED構造体
	- x座標(int)
	- y座標(int)
	- 点灯色(unsigned int)
- 表示可能な文字列情報
	- 表示する文字列
	- 対応するLEDマッピング(unsigned long long[16])
	- 使用するLED幅
	- 表示色_R
	- 表示色_G
	- 表示色_B
- 路線情報
	- 路線名
	- 路線カラー1_R
	- 路線カラー1_G
	- 路線カラー1_B
	- 路線カラー2_R
	- 路線カラー2_G
	- 路線カラー2_B
- 列車情報
	- 路線
	- 列車種別
	- 行き先
	- 発車時刻

## クラス
- LEDマトリクス
- 時刻表


## 外部ファイル
### 文字列情報ファイル
- 最大999種類
- 文字列は重複できない(ヴァリエーションは作れない)
#### 文字列情報ファイルのフォーマット
- LEDマッピングデータ / 符号なし64 x 16[bit]
	- 1024[bit] / 1[Kbit] / 128[Byte] / 16 x 8[Byte]
- 使用LED幅 / 8[bit]
	- 値の範囲は1-64 / 範囲外はエラーの扱い
- 赤光度 / 符号なし8[bit]
	- 値の範囲は 0-255
- 緑光度 / 符号なし8[bit]
	- 値の範囲は 0-255
- 青光度 / 符号なし8[bit]
	- 値の範囲は 0-255
- 文字種別 / char型8[bit]
	- 値は{ 'N'(Number:数字0-9) / 'S'(Symbol:記号) / 'J'(Japanese:日本語文字列) / 'E'(English:英表記文字列) }
- 表示文字列 / std::string型自由[bit]
	- エンコードはShift-JIS

基本項目: 133[Byte] / 1064[bit] + 文字列[Byte]